(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const ut=!1,dt=(e,t)=>e===t,ke=Symbol("solid-proxy"),ft=typeof Proxy=="function",ht=Symbol("solid-track"),ce={equals:dt};let Ke=Ge;const W=1,ue=2,He={owned:null,cleanups:null,context:null,owner:null};var x=null;let pe=null,gt=null,_=null,D=null,H=null,ge=0;function Z(e,t){const r=_,s=x,n=e.length===0,o=t===void 0?s:t,i=n?He:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=n?e:()=>e(()=>B(()=>te(i)));x=i,_=null;try{return V(a,!0)}finally{_=r,x=s}}function T(e,t){t=t?Object.assign({},ce,t):ce;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(r.value)),Xe(r,n));return[Ye.bind(r),s]}function F(e,t,r){const s=Oe(e,t,!1,W);re(s)}function Ae(e,t,r){Ke=vt;const s=Oe(e,t,!1,W);s.user=!0,H?H.push(s):re(s)}function I(e,t,r){r=r?Object.assign({},ce,r):ce;const s=Oe(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=r.equals||void 0,re(s),Ye.bind(s)}function mt(e){return V(e,!1)}function B(e){if(_===null)return e();const t=_;_=null;try{return e()}finally{_=t}}function Pe(e,t,r){const s=Array.isArray(e);let n,o=r&&r.defer;return i=>{let a;if(s){a=Array(e.length);for(let c=0;c<e.length;c++)a[c]=e[c]()}else a=e();if(o)return o=!1,i;const l=B(()=>t(a,n,i));return n=a,l}}function yt(e){Ae(()=>B(e))}function _e(e){return x===null||(x.cleanups===null?x.cleanups=[e]:x.cleanups.push(e)),e}function qe(){return x}function We(e,t){const r=x,s=_;x=e,_=null;try{return V(t,!0)}catch(n){Le(n)}finally{x=r,_=s}}function pt(e){const t=_,r=x;return Promise.resolve().then(()=>{_=t,x=r;let s;return V(e,!1),_=x=null,s?s.done:void 0})}const[Rr,Ir]=T(!1);function Ve(e,t){const r=Symbol("context");return{id:r,Provider:kt(r),defaultValue:e}}function Je(e){let t;return x&&x.context&&(t=x.context[e.id])!==void 0?t:e.defaultValue}function Ee(e){const t=I(e),r=I(()=>$e(t()));return r.toArray=()=>{const s=r();return Array.isArray(s)?s:s!=null?[s]:[]},r}function Ye(){if(this.sources&&this.state)if(this.state===W)re(this);else{const e=D;D=null,V(()=>fe(this),!1),D=e}if(_){const e=this.observers?this.observers.length:0;_.sources?(_.sources.push(this),_.sourceSlots.push(e)):(_.sources=[this],_.sourceSlots=[e]),this.observers?(this.observers.push(_),this.observerSlots.push(_.sources.length-1)):(this.observers=[_],this.observerSlots=[_.sources.length-1])}return this.value}function Xe(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&V(()=>{for(let n=0;n<e.observers.length;n+=1){const o=e.observers[n],i=pe&&pe.running;i&&pe.disposed.has(o),(i?!o.tState:!o.state)&&(o.pure?D.push(o):H.push(o),o.observers&&ze(o)),i||(o.state=W)}if(D.length>1e6)throw D=[],new Error},!1)),t}function re(e){if(!e.fn)return;te(e);const t=ge;bt(e,e.value,t)}function bt(e,t,r){let s;const n=x,o=_;_=x=e;try{s=e.fn(t)}catch(i){return e.pure&&(e.state=W,e.owned&&e.owned.forEach(te),e.owned=null),e.updatedAt=r+1,Le(i)}finally{_=o,x=n}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Xe(e,s):e.value=s,e.updatedAt=r)}function Oe(e,t,r,s=W,n){const o={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:x,context:x?x.context:null,pure:r};return x===null||x!==He&&(x.owned?x.owned.push(o):x.owned=[o]),o}function de(e){if(e.state===0)return;if(e.state===ue)return fe(e);if(e.suspense&&B(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ge);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===W)re(e);else if(e.state===ue){const s=D;D=null,V(()=>fe(e,t[0]),!1),D=s}}function V(e,t){if(D)return e();let r=!1;t||(D=[]),H?r=!0:H=[],ge++;try{const s=e();return wt(r),s}catch(s){r||(H=null),D=null,Le(s)}}function wt(e){if(D&&(Ge(D),D=null),e)return;const t=H;H=null,t.length&&V(()=>Ke(t),!1)}function Ge(e){for(let t=0;t<e.length;t++)de(e[t])}function vt(e){let t,r=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[r++]=s:de(s)}for(t=0;t<r;t++)de(e[t])}function fe(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const n=s.state;n===W?s!==t&&(!s.updatedAt||s.updatedAt<ge)&&de(s):n===ue&&fe(s,t)}}}function ze(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=ue,r.pure?D.push(r):H.push(r),r.observers&&ze(r))}}function te(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){const o=n.pop(),i=r.observerSlots.pop();s<n.length&&(o.sourceSlots[i]=s,n[s]=o,r.observerSlots[s]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)te(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)te(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function xt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Le(e,t=x){throw xt(e)}function $e(e){if(typeof e=="function"&&!e.length)return $e(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const s=$e(e[r]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function kt(e,t){return function(s){let n;return F(()=>n=B(()=>(x.context={...x.context,[e]:s.value},Ee(()=>s.children))),void 0),n}}const $t=Symbol("fallback");function je(e){for(let t=0;t<e.length;t++)e[t]()}function Ct(e,t,r={}){let s=[],n=[],o=[],i=0,a=t.length>1?[]:null;return _e(()=>je(o)),()=>{let l=e()||[],c=l.length,d,u;return l[ht],B(()=>{let m,v,h,f,p,y,S,k,R;if(c===0)i!==0&&(je(o),o=[],s=[],n=[],i=0,a&&(a=[])),r.fallback&&(s=[$t],n[0]=Z(U=>(o[0]=U,r.fallback())),i=1);else if(i===0){for(n=new Array(c),u=0;u<c;u++)s[u]=l[u],n[u]=Z(g);i=c}else{for(h=new Array(c),f=new Array(c),a&&(p=new Array(c)),y=0,S=Math.min(i,c);y<S&&s[y]===l[y];y++);for(S=i-1,k=c-1;S>=y&&k>=y&&s[S]===l[k];S--,k--)h[k]=n[S],f[k]=o[S],a&&(p[k]=a[S]);for(m=new Map,v=new Array(k+1),u=k;u>=y;u--)R=l[u],d=m.get(R),v[u]=d===void 0?-1:d,m.set(R,u);for(d=y;d<=S;d++)R=s[d],u=m.get(R),u!==void 0&&u!==-1?(h[u]=n[d],f[u]=o[d],a&&(p[u]=a[d]),u=v[u],m.set(R,u)):o[d]();for(u=y;u<c;u++)u in h?(n[u]=h[u],o[u]=f[u],a&&(a[u]=p[u],a[u](u))):n[u]=Z(g);n=n.slice(0,i=c),s=l.slice(0)}return n});function g(m){if(o[u]=m,a){const[v,h]=T(u);return a[u]=h,t(l[u],v)}return t(l[u])}}}function w(e,t){return B(()=>e(t||{}))}function oe(){return!0}const St={get(e,t,r){return t===ke?r:e.get(t)},has(e,t){return t===ke?!0:e.has(t)},set:oe,deleteProperty:oe,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:oe,deleteProperty:oe}},ownKeys(e){return e.keys()}};function be(e){return(e=typeof e=="function"?e():e)?e:{}}function At(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function ae(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&ke in a,e[i]=typeof a=="function"?(t=!0,I(a)):a}if(ft&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const l=be(e[a])[i];if(l!==void 0)return l}},has(i){for(let a=e.length-1;a>=0;a--)if(i in be(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(be(e[a])));return[...new Set(i)]}},St);const r={},s=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const d=l[c];if(d==="__proto__"||d==="constructor")continue;const u=Object.getOwnPropertyDescriptor(a,d);if(!s[d])s[d]=u.get?{enumerable:!0,configurable:!0,get:At.bind(r[d]=[u.get.bind(a)])}:u.value!==void 0?u:void 0;else{const g=r[d];g&&(u.get?g.push(u.get.bind(a)):u.value!==void 0&&g.push(()=>u.value))}}}const n={},o=Object.keys(s);for(let i=o.length-1;i>=0;i--){const a=o[i],l=s[a];l&&l.get?Object.defineProperty(n,a,l):n[a]=l?l.value:void 0}return n}const Pt=e=>`Stale read from <${e}>.`;function ie(e){const t="fallback"in e&&{fallback:()=>e.fallback};return I(Ct(()=>e.each,e.children,t||void 0))}function M(e){const t=e.keyed,r=I(()=>e.when,void 0,void 0),s=t?r:I(r,void 0,{equals:(n,o)=>!n==!o});return I(()=>{const n=s();if(n){const o=e.children;return typeof o=="function"&&o.length>0?B(()=>o(t?n:()=>{if(!B(s))throw Pt("Show");return r()})):o}return e.fallback},void 0,void 0)}const Re=e=>I(()=>e());function _t(e,t,r){let s=r.length,n=t.length,o=s,i=0,a=0,l=t[n-1].nextSibling,c=null;for(;i<n||a<o;){if(t[i]===r[a]){i++,a++;continue}for(;t[n-1]===r[o-1];)n--,o--;if(n===i){const d=o<s?a?r[a-1].nextSibling:r[o-a]:l;for(;a<o;)e.insertBefore(r[a++],d)}else if(o===a)for(;i<n;)(!c||!c.has(t[i]))&&t[i].remove(),i++;else if(t[i]===r[o-1]&&r[a]===t[n-1]){const d=t[--n].nextSibling;e.insertBefore(r[a++],t[i++].nextSibling),e.insertBefore(r[--o],d),t[n]=r[o]}else{if(!c){c=new Map;let u=a;for(;u<o;)c.set(r[u],u++)}const d=c.get(t[i]);if(d!=null)if(a<d&&d<o){let u=i,g=1,m;for(;++u<n&&u<o&&!((m=c.get(t[u]))==null||m!==d+g);)g++;if(g>d-a){const v=t[i];for(;a<d;)e.insertBefore(r[a++],v)}else e.replaceChild(r[a++],t[i++])}else i++;else t[i++].remove()}}}const Ne="_$DX_DELEGATE";function Et(e,t,r,s={}){let n;return Z(o=>{n=o,t===document?e():E(t,e(),t.firstChild?null:void 0,r)},s.owner),()=>{n(),t.textContent=""}}function L(e,t,r,s){let n;const o=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},i=()=>(n||(n=o())).cloneNode(!0);return i.cloneNode=i,i}function ne(e,t=window.document){const r=t[Ne]||(t[Ne]=new Set);for(let s=0,n=e.length;s<n;s++){const o=e[s];r.has(o)||(r.add(o),t.addEventListener(o,Ot))}}function De(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function q(e,t){t==null?e.removeAttribute("class"):e.className=t}function Qe(e,t,r,s){Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r}function Ze(e,t,r){return B(()=>e(t,r))}function E(e,t,r,s){if(r!==void 0&&!s&&(s=[]),typeof t!="function")return he(e,t,s,r);F(n=>he(e,t(),n,r),s)}function Ot(e){let t=e.target;const r=`$$${e.type}`,s=e.target,n=e.currentTarget,o=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),i=()=>{const l=t[r];if(l&&!t.disabled){const c=t[`${r}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();o(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!i());c++){if(t._$host){t=t._$host,a();break}if(t.parentNode===n)break}}else a();o(s)}function he(e,t,r,s,n){for(;typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,i=s!==void 0;if(e=i&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===r))return r;if(i){let a=r[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),r=z(e,r,s,a)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean")r=z(e,r,s);else{if(o==="function")return F(()=>{let a=t();for(;typeof a=="function";)a=a();r=he(e,a,r,s)}),()=>r;if(Array.isArray(t)){const a=[],l=r&&Array.isArray(r);if(Ce(a,t,r,n))return F(()=>r=he(e,a,r,s,!0)),()=>r;if(a.length===0){if(r=z(e,r,s),i)return r}else l?r.length===0?Me(e,a,s):_t(e,r,a):(r&&z(e),Me(e,a));r=a}else if(t.nodeType){if(Array.isArray(r)){if(i)return r=z(e,r,s,t);z(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function Ce(e,t,r,s){let n=!1;for(let o=0,i=t.length;o<i;o++){let a=t[o],l=r&&r[e.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))n=Ce(e,a,l)||n;else if(c==="function")if(s){for(;typeof a=="function";)a=a();n=Ce(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||n}else e.push(a),n=!0;else{const d=String(a);l&&l.nodeType===3&&l.data===d?e.push(l):e.push(document.createTextNode(d))}}return n}function Me(e,t,r=null){for(let s=0,n=t.length;s<n;s++)e.insertBefore(t[s],r)}function z(e,t,r,s){if(r===void 0)return e.textContent="";const n=s||document.createTextNode("");if(t.length){let o=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(n!==a){const l=a.parentNode===e;!o&&!i?l?e.replaceChild(n,a):e.insertBefore(n,r):l&&a.remove()}else o=!0}}else e.insertBefore(n,r);return[n]}const Lt=!1;function et(){let e=new Set;function t(n){return e.add(n),()=>e.delete(n)}let r=!1;function s(n,o){if(r)return!(r=!1);const i={to:n,options:o,defaultPrevented:!1,preventDefault:()=>i.defaultPrevented=!0};for(const a of e)a.listener({...i,from:a.location,retry:l=>{l&&(r=!0),a.navigate(n,{...o,resolve:!1})}});return!i.defaultPrevented}return{subscribe:t,confirm:s}}let Se;function Ie(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Se=window.history.state._depth}Ie();function Rt(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function It(e,t){let r=!1;return()=>{const s=Se;Ie();const n=s==null?null:Se-s;if(r){r=!1;return}n&&t(n)?(r=!0,window.history.go(-n)):e()}}const Tt=/^(?:[a-z0-9]+:)?\/\//i,jt=/^\/+|(\/)\/+$/g,tt="http://sr";function ee(e,t=!1){const r=e.replace(jt,"$1");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function le(e,t,r){if(Tt.test(t))return;const s=ee(e),n=r&&ee(r);let o="";return!n||t.startsWith("/")?o=s:n.toLowerCase().indexOf(s.toLowerCase())!==0?o=s+n:o=n,(o||"/")+ee(t,!o)}function Nt(e,t){if(e==null)throw new Error(t);return e}function Dt(e,t){return ee(e).replace(/\/*(\*.*)?$/g,"")+ee(t)}function rt(e){const t={};return e.searchParams.forEach((r,s)=>{s in t?Array.isArray(t[s])?t[s].push(r):t[s]=[t[s],r]:t[s]=r}),t}function Mt(e,t,r){const[s,n]=e.split("/*",2),o=s.split("/").filter(Boolean),i=o.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-i;if(c<0||c>0&&n===void 0&&!t)return null;const d={path:i?"":"/",params:{}},u=g=>r===void 0?void 0:r[g];for(let g=0;g<i;g++){const m=o[g],v=m[0]===":",h=v?l[g]:l[g].toLowerCase(),f=v?m.slice(1):m.toLowerCase();if(v&&we(h,u(f)))d.params[f]=h;else if(v||!we(h,f))return null;d.path+=`/${h}`}if(n){const g=c?l.slice(-c).join("/"):"";if(we(g,u(n)))d.params[n]=g;else return null}return d}}function we(e,t){const r=s=>s===e;return t===void 0?!0:typeof t=="string"?r(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(r):t instanceof RegExp?t.test(e):!1}function Ft(e){const[t,r]=e.pattern.split("/*",2),s=t.split("/").filter(Boolean);return s.reduce((n,o)=>n+(o.startsWith(":")?2:3),s.length-(r===void 0?0:1))}function nt(e){const t=new Map,r=qe();return new Proxy({},{get(s,n){return t.has(n)||We(r,()=>t.set(n,I(()=>e()[n]))),t.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(s,n){return n in e()}})}function st(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let r=e.slice(0,t.index),s=e.slice(t.index+t[0].length);const n=[r,r+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(s);)n.push(r+=t[1]),s=s.slice(t[0].length);return st(s).reduce((o,i)=>[...o,...n.map(a=>a+i)],[])}const Bt=100,ot=Ve(),at=Ve(),it=()=>Nt(Je(ot),"<A> and 'use' router primitives can be only used inside a Route."),Ut=()=>it().navigatorFactory(),Kt=()=>it().params;function Ht(e,t=""){const{component:r,preload:s,load:n,children:o,info:i}=e,a=!o||Array.isArray(o)&&!o.length,l={key:e,component:r,preload:s||n,info:i};return lt(e.path).reduce((c,d)=>{for(const u of st(d)){const g=Dt(t,u);let m=a?g:g.split("/*",1)[0];m=m.split("/").map(v=>v.startsWith(":")||v.startsWith("*")?v:encodeURIComponent(v)).join("/"),c.push({...l,originalPath:d,pattern:m,matcher:Mt(m,!a,e.matchFilters)})}return c},[])}function qt(e,t=0){return{routes:e,score:Ft(e[e.length-1])*1e4-t,matcher(r){const s=[];for(let n=e.length-1;n>=0;n--){const o=e[n],i=o.matcher(r);if(!i)return null;s.unshift({...i,route:o})}return s}}}function lt(e){return Array.isArray(e)?e:[e]}function ct(e,t="",r=[],s=[]){const n=lt(e);for(let o=0,i=n.length;o<i;o++){const a=n[o];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Ht(a,t);for(const c of l){r.push(c);const d=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!d)ct(a.children,c.pattern,r,s);else{const u=qt([...r],s.length);s.push(u)}r.pop()}}}return r.length?s:s.sort((o,i)=>i.score-o.score)}function ve(e,t){for(let r=0,s=e.length;r<s;r++){const n=e[r].matcher(t);if(n)return n}return[]}function Wt(e,t,r){const s=new URL(tt),n=I(d=>{const u=e();try{return new URL(u,s)}catch{return console.error(`Invalid path ${u}`),d}},s,{equals:(d,u)=>d.href===u.href}),o=I(()=>n().pathname),i=I(()=>n().search,!0),a=I(()=>n().hash),l=()=>"",c=Pe(i,()=>rt(n()));return{get pathname(){return o()},get search(){return i()},get hash(){return a()},get state(){return t()},get key(){return l()},query:r?r(c):nt(c)}}let J;function Vt(){return J}function Jt(e,t,r,s={}){const{signal:[n,o],utils:i={}}=e,a=i.parsePath||(b=>b),l=i.renderPath||(b=>b),c=i.beforeLeave||et(),d=le("",s.base||"");if(d===void 0)throw new Error(`${d} is not a valid base path`);d&&!n().value&&o({value:d,replace:!0,scroll:!1});const[u,g]=T(!1);let m;const v=(b,$)=>{$.value===h()&&$.state===p()||(m===void 0&&g(!0),J=b,m=$,pt(()=>{m===$&&(f(m.value),y(m.state),R[1](N=>N.filter(X=>X.pending)))}).finally(()=>{m===$&&mt(()=>{J=void 0,b==="navigate"&&j(m),g(!1),m=void 0})}))},[h,f]=T(n().value),[p,y]=T(n().state),S=Wt(h,p,i.queryWrapper),k=[],R=T([]),U=I(()=>typeof s.transformUrl=="function"?ve(t(),s.transformUrl(S.pathname)):ve(t(),S.pathname)),A=()=>{const b=U(),$={};for(let N=0;N<b.length;N++)Object.assign($,b[N].params);return $},C=i.paramsWrapper?i.paramsWrapper(A,t):nt(A),P={pattern:d,path:()=>d,outlet:()=>null,resolvePath(b){return le(d,b)}};return F(Pe(n,b=>v("native",b),{defer:!0})),{base:P,location:S,params:C,isRouting:u,renderPath:l,parsePath:a,navigatorFactory:O,matches:U,beforeLeave:c,preloadRoute:Y,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:R};function K(b,$,N){B(()=>{if(typeof $=="number"){$&&(i.go?i.go($):console.warn("Router integration does not support relative routing"));return}const X=!$||$[0]==="?",{replace:me,resolve:G,scroll:ye,state:Q}={replace:!1,resolve:!X,scroll:!0,...N},se=G?b.resolvePath($):le(X&&S.pathname||"",$);if(se===void 0)throw new Error(`Path '${$}' is not a routable path`);if(k.length>=Bt)throw new Error("Too many redirects");const Te=h();(se!==Te||Q!==p())&&(Lt||c.confirm(se,N)&&(k.push({value:Te,replace:me,scroll:ye,state:p()}),v("navigate",{value:se,state:Q})))})}function O(b){return b=b||Je(at)||P,($,N)=>K(b,$,N)}function j(b){const $=k[0];$&&(o({...b,replace:$.replace,scroll:$.scroll}),k.length=0)}function Y(b,$){const N=ve(t(),b.pathname),X=J;J="preload";for(let me in N){const{route:G,params:ye}=N[me];G.component&&G.component.preload&&G.component.preload();const{preload:Q}=G;$&&Q&&We(r(),()=>Q({params:ye,location:{pathname:b.pathname,search:b.search,hash:b.hash,query:rt(b),state:null,key:""},intent:"preload"}))}J=X}}function Yt(e,t,r,s){const{base:n,location:o,params:i}=e,{pattern:a,component:l,preload:c}=s().route,d=I(()=>s().path);l&&l.preload&&l.preload();const u=c?c({params:i,location:o,intent:J||"initial"}):void 0;return{parent:t,pattern:a,path:d,outlet:()=>l?w(l,{params:i,location:o,data:u,get children(){return r()}}):r(),resolvePath(m){return le(n.path(),m,d())}}}const Xt=e=>t=>{const{base:r}=t,s=Ee(()=>t.children),n=I(()=>ct(s(),t.base||""));let o;const i=Jt(e,n,()=>o,{base:r,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(i),w(ot.Provider,{value:i,get children(){return w(Gt,{routerState:i,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[Re(()=>(o=qe())&&null),w(zt,{routerState:i,get branches(){return n()}})]}})}})};function Gt(e){const t=e.routerState.location,r=e.routerState.params,s=I(()=>e.preload&&B(()=>{e.preload({params:r,location:t,intent:Vt()||"initial"})}));return w(M,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:n=>w(n,{params:r,location:t,get data(){return s()},get children(){return e.children}})})}function zt(e){const t=[];let r;const s=I(Pe(e.routerState.matches,(n,o,i)=>{let a=o&&n.length===o.length;const l=[];for(let c=0,d=n.length;c<d;c++){const u=o&&o[c],g=n[c];i&&u&&g.route.key===u.route.key?l[c]=i[c]:(a=!1,t[c]&&t[c](),Z(m=>{t[c]=m,l[c]=Yt(e.routerState,l[c-1]||e.routerState.base,Fe(()=>s()[c+1]),()=>{const v=e.routerState.matches();return v[c]??v[0]})}))}return t.splice(n.length).forEach(c=>c()),i&&a?i:(r=l[0],l)}));return Fe(()=>s()&&r)()}const Fe=e=>()=>w(M,{get when(){return e()},keyed:!0,children:t=>w(at.Provider,{value:t,get children(){return t.outlet()}})}),Be=e=>{const t=Ee(()=>e.children);return ae(e,{get children(){return t()}})};function Qt([e,t],r,s){return[e,s?n=>t(s(n)):t]}function Zt(e){let t=!1;const r=n=>typeof n=="string"?{value:n}:n,s=Qt(T(r(e.get()),{equals:(n,o)=>n.value===o.value&&n.state===o.state}),void 0,n=>(!t&&e.set(n),n));return e.init&&_e(e.init((n=e.get())=>{t=!0,s[1](r(n)),t=!1})),Xt({signal:s,create:e.create,utils:e.utils})}function er(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function tr(e,t){const r=e&&document.getElementById(e);r?r.scrollIntoView():t&&window.scrollTo(0,0)}const rr=new Map;function nr(e=!0,t=!1,r="/_server",s){return n=>{const o=n.base.path(),i=n.navigatorFactory(n.base);let a,l;function c(h){return h.namespaceURI==="http://www.w3.org/2000/svg"}function d(h){if(h.defaultPrevented||h.button!==0||h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)return;const f=h.composedPath().find(U=>U instanceof Node&&U.nodeName.toUpperCase()==="A");if(!f||t&&!f.hasAttribute("link"))return;const p=c(f),y=p?f.href.baseVal:f.href;if((p?f.target.baseVal:f.target)||!y&&!f.hasAttribute("state"))return;const k=(f.getAttribute("rel")||"").split(/\s+/);if(f.hasAttribute("download")||k&&k.includes("external"))return;const R=p?new URL(y,document.baseURI):new URL(y);if(!(R.origin!==window.location.origin||o&&R.pathname&&!R.pathname.toLowerCase().startsWith(o.toLowerCase())))return[f,R]}function u(h){const f=d(h);if(!f)return;const[p,y]=f,S=n.parsePath(y.pathname+y.search+y.hash),k=p.getAttribute("state");h.preventDefault(),i(S,{resolve:!1,replace:p.hasAttribute("replace"),scroll:!p.hasAttribute("noscroll"),state:k?JSON.parse(k):void 0})}function g(h){const f=d(h);if(!f)return;const[p,y]=f;s&&(y.pathname=s(y.pathname)),n.preloadRoute(y,p.getAttribute("preload")!=="false")}function m(h){clearTimeout(a);const f=d(h);if(!f)return l=null;const[p,y]=f;l!==p&&(s&&(y.pathname=s(y.pathname)),a=setTimeout(()=>{n.preloadRoute(y,p.getAttribute("preload")!=="false"),l=p},20))}function v(h){if(h.defaultPrevented)return;let f=h.submitter&&h.submitter.hasAttribute("formaction")?h.submitter.getAttribute("formaction"):h.target.getAttribute("action");if(!f)return;if(!f.startsWith("https://action/")){const y=new URL(f,tt);if(f=n.parsePath(y.pathname+y.search),!f.startsWith(r))return}if(h.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const p=rr.get(f);if(p){h.preventDefault();const y=new FormData(h.target,h.submitter);p.call({r:n,f:h.target},h.target.enctype==="multipart/form-data"?y:new URLSearchParams(y))}}ne(["click","submit"]),document.addEventListener("click",u),e&&(document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("focusin",g,{passive:!0}),document.addEventListener("touchstart",g,{passive:!0})),document.addEventListener("submit",v),_e(()=>{document.removeEventListener("click",u),e&&(document.removeEventListener("mousemove",m),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",v)})}}function sr(e){const t=()=>{const s=window.location.pathname.replace(/^\/+/,"/")+window.location.search,n=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:s+window.location.hash,state:n}},r=et();return Zt({get:t,set({value:s,replace:n,scroll:o,state:i}){n?window.history.replaceState(Rt(i),"",s):window.history.pushState(i,"",s),tr(decodeURIComponent(window.location.hash.slice(1)),o),Ie()},init:s=>er(window,"popstate",It(s,n=>{if(n)return!r.confirm(n);{const o=t();return!r.confirm(o.value,{state:o.state})}})),create:nr(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:s=>window.history.go(s),beforeLeave:r}})(e)}var or=L('<div class=mb-2><h3 class="px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Today'),ar=L('<div class=mb-2><h3 class="px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Yesterday'),ir=L('<div class=mb-2><h3 class="px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Older'),lr=L('<p class="px-3 py-8 text-center text-sm text-gray-500 dark:text-gray-400">No chats yet.<br>Start a new conversation!'),cr=L('<aside class="w-60 border-r border-gray-200 dark:border-gray-700 bg-gray-100/50 dark:bg-gray-800/50 flex flex-col"><div class=p-3><button class="w-full flex items-center gap-2 px-3 py-2 rounded-lg bg-accent hover:bg-accent-hover text-white text-sm font-medium transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>New Chat</button></div><div class="flex-1 overflow-y-auto px-2"></div><div class="p-3 border-t border-gray-200 dark:border-gray-700"><div class="text-xs text-gray-500 dark:text-gray-400 text-center">FreeTier v0.1.0'),ur=L('<button class="absolute right-2 p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-500"title="Delete chat"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),dr=L('<div><button class="flex-1 text-left px-3 py-2 text-sm truncate">');function fr(e){const[t,r]=T(null);function s(o){const i=new Date,a=new Date(i);a.setDate(a.getDate()-1);const l={today:[],yesterday:[],older:[]};return o.forEach(c=>{const u=new Date(c.updated_at).toDateString();u===i.toDateString()?l.today.push(c):u===a.toDateString()?l.yesterday.push(c):l.older.push(c)}),l}const n=()=>s(e.chats);return(()=>{var o=cr(),i=o.firstChild,a=i.firstChild,l=i.nextSibling;return Qe(a,"click",e.onNewChat),E(l,w(M,{get when(){return n().today.length>0},get children(){var c=or();return c.firstChild,E(c,w(ie,{get each(){return n().today},children:d=>w(xe,ae({chat:d},e,{hoveredId:t,setHoveredId:r}))}),null),c}}),null),E(l,w(M,{get when(){return n().yesterday.length>0},get children(){var c=ar();return c.firstChild,E(c,w(ie,{get each(){return n().yesterday},children:d=>w(xe,ae({chat:d},e,{hoveredId:t,setHoveredId:r}))}),null),c}}),null),E(l,w(M,{get when(){return n().older.length>0},get children(){var c=ir();return c.firstChild,E(c,w(ie,{get each(){return n().older},children:d=>w(xe,ae({chat:d},e,{hoveredId:t,setHoveredId:r}))}),null),c}}),null),E(l,w(M,{get when(){return e.chats.length===0},get children(){return lr()}}),null),o})()}function xe(e){const t=()=>e.currentChatId===e.chat.id,r=()=>e.hoveredId()===e.chat.id;return(()=>{var s=dr(),n=s.firstChild;return s.addEventListener("mouseleave",()=>e.setHoveredId(null)),s.addEventListener("mouseenter",()=>e.setHoveredId(e.chat.id)),n.$$click=()=>e.onSelectChat(e.chat.id),E(n,()=>e.chat.title||"New Chat"),E(s,w(M,{get when(){return r()},get children(){var o=ur();return o.$$click=i=>{i.stopPropagation(),e.onDeleteChat(e.chat.id)},o}}),null),F(()=>q(s,`group relative flex items-center rounded-lg cursor-pointer transition-colors ${t()?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-200/50 dark:hover:bg-gray-700/50"}`)),s})()}ne(["click"]);var hr=L('<div class="flex-1 overflow-y-auto px-4 py-6"><div class="max-w-3xl mx-auto space-y-4"><div>'),gr=L('<div class="flex flex-col items-center justify-center py-12 text-center"><div class="w-16 h-16 mb-4 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"><svg class="w-8 h-8 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg></div><h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2">Welcome to FreeTier AI</h2><p class="text-gray-500 dark:text-gray-400 max-w-md">Chat with free AI models. Ask questions, get help with code, or just have a conversation.'),mr=L('<div><button class="p-1.5 rounded-lg bg-white dark:bg-gray-700 shadow-sm hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400"title=Copy><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),yr=L('<div><div class="relative max-w-[80%]"><div><div class="text-sm whitespace-pre-wrap break-words">'),pr=L('<div class="flex justify-start message-enter"><div class=max-w-[80%]><div class="px-4 py-3 rounded-2xl rounded-bl-md bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100"><div class="text-sm whitespace-pre-wrap break-words"><span class=cursor-blink>|');function br(e){let t;return Ae(()=>{e.messages.length,e.streamingContent,t&&t.scrollIntoView({behavior:"smooth"})}),(()=>{var r=hr(),s=r.firstChild,n=s.firstChild;E(s,w(M,{get when(){return Re(()=>e.messages.length===0)()&&!e.isStreaming},get children(){return w(wr,{})}}),n),E(s,w(ie,{get each(){return e.messages},children:i=>w(vr,{message:i})}),n),E(s,w(M,{get when(){return e.isStreaming},get children(){return w(xr,{get content(){return e.streamingContent}})}}),n);var o=t;return typeof o=="function"?Ze(o,n):t=n,r})()}function wr(){return gr()}function vr(e){const[t,r]=T(!1),s=()=>e.message.role==="user";async function n(){try{await navigator.clipboard.writeText(e.message.content)}catch(o){console.error("Failed to copy:",o)}}return(()=>{var o=yr(),i=o.firstChild,a=i.firstChild,l=a.firstChild;return o.addEventListener("mouseleave",()=>r(!1)),o.addEventListener("mouseenter",()=>r(!0)),E(l,()=>e.message.content),E(i,w(M,{get when(){return t()},get children(){var c=mr(),d=c.firstChild;return d.$$click=n,F(()=>q(c,`absolute top-0 ${s()?"left-0 -translate-x-full pr-2":"right-0 translate-x-full pl-2"} flex items-center gap-1`)),c}}),null),F(c=>{var d=`group flex ${s()?"justify-end":"justify-start"} message-enter`,u=`px-4 py-3 rounded-2xl ${s()?"bg-accent text-white rounded-br-md":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-bl-md"}`;return d!==c.e&&q(o,c.e=d),u!==c.t&&q(a,c.t=u),c},{e:void 0,t:void 0}),o})()}function xr(e){return(()=>{var t=pr(),r=t.firstChild,s=r.firstChild,n=s.firstChild,o=n.firstChild;return E(n,()=>e.content||"",o),t})()}ne(["click"]);var kr=L('<button type=submit><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 10l7-7m0 0l7 7m-7-7v18">'),$r=L('<span class="text-xs text-gray-400">Press <kbd class="px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-700 font-mono">⌘</kbd> + <kbd class="px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-700 font-mono">↩</kbd> to send'),Cr=L('<div><div class="max-w-3xl mx-auto"><form class=relative><div><button type=button class="p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"title="Attach file"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path></svg></button><textarea rows=1 class="flex-1 py-3 pr-3 bg-transparent resize-none outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400 text-sm max-h-48 disabled:cursor-not-allowed"></textarea></div><div class="mt-2 text-center">'),Sr=L('<button type=button class="m-2 p-2 rounded-lg bg-red-500 hover:bg-red-600 text-white transition-colors"title=Stop><svg class="w-5 h-5"fill=currentColor viewBox="0 0 24 24"><rect x=6 y=6 width=12 height=12 rx=1>'),Ar=L('<span class="text-xs text-amber-600 dark:text-amber-400">Messaging disabled - no AI models available');function Pr(e){const[t,r]=T("");let s;const n=()=>e.isStreaming||e.disabled;function o(l){l?.preventDefault();const c=t().trim();c&&!n()&&(e.onSend(c),r(""),s&&(s.style.height="auto"))}function i(l){(l.metaKey||l.ctrlKey)&&l.key==="Enter"&&(l.preventDefault(),o())}function a(l){r(l.target.value),l.target.style.height="auto",l.target.style.height=Math.min(l.target.scrollHeight,200)+"px"}return(()=>{var l=Cr(),c=l.firstChild,d=c.firstChild,u=d.firstChild,g=u.firstChild,m=g.nextSibling,v=u.nextSibling;d.addEventListener("submit",o),m.$$keydown=i,m.$$input=a;var h=s;return typeof h=="function"?Ze(h,m):s=m,E(u,w(M,{get when(){return!e.isStreaming},get fallback(){return(()=>{var f=Sr();return Qe(f,"click",e.onStop),f})()},get children(){var f=kr();return F(p=>{var y=!t().trim()||e.disabled,S=`m-2 p-2 rounded-lg transition-colors ${t().trim()&&!e.disabled?"bg-accent hover:bg-accent-hover text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,k=e.disabled?"No models available":"Send (⌘↩)";return y!==p.e&&(f.disabled=p.e=y),S!==p.t&&q(f,p.t=S),k!==p.a&&De(f,"title",p.a=k),p},{e:void 0,t:void 0,a:void 0}),f}}),null),E(v,w(M,{get when(){return!e.disabled},get fallback(){return Ar()},get children(){return $r()}})),F(f=>{var p=`border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 ${e.disabled?"opacity-60":""}`,y=`flex items-end gap-2 bg-gray-50 dark:bg-gray-900 rounded-xl border ${e.disabled?"border-gray-300 dark:border-gray-600":"border-gray-200 dark:border-gray-700 focus-within:border-accent focus-within:ring-1 focus-within:ring-accent"}`,S=e.disabled,k=e.disabled?"No models available...":"Message... (⌘↩ to send)",R=n();return p!==f.e&&q(l,f.e=p),y!==f.t&&q(u,f.t=y),S!==f.a&&(g.disabled=f.a=S),k!==f.o&&De(m,"placeholder",f.o=k),R!==f.i&&(m.disabled=f.i=R),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),F(()=>m.value=t()),l})()}ne(["input","keydown","click"]);var _r=L('<div><span></span><button class="ml-1 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700"title=Refresh><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),Er=L('<div class="bg-amber-50 dark:bg-amber-900/20 border-b border-amber-200 dark:border-amber-800 px-4 py-3"><div class="flex items-start gap-3 max-w-3xl mx-auto"><svg class="w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h3 class="text-sm font-medium text-amber-800 dark:text-amber-200">No Free AI Models Available</h3><p class="text-sm text-amber-700 dark:text-amber-300 mt-1">All free tier quotas may be exhausted, or the providers are experiencing issues. You can still view your chat history. Check back later.'),Or=L('<div class="h-screen flex bg-gray-50 dark:bg-gray-900"><div class="flex-1 flex flex-col"><header class="h-12 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm"><h1 class="text-sm font-medium text-gray-600 dark:text-gray-300">');function Ue(){const e=Kt(),t=Ut(),[r,s]=T([]),[n,o]=T(null),[i,a]=T([]),[l,c]=T(!1),[d,u]=T(""),[g,m]=T(null),[v,h]=T(0);yt(async()=>{await Promise.all([p(),f()]),e.id&&await y(e.id)}),Ae(async()=>{e.id&&e.id!==n()?.id&&await y(e.id)});async function f(){try{const P=(await(await fetch("/v1/models")).json()).data?.length||0;h(P),m(P>0)}catch(A){console.error("Failed to check models:",A),m(!1)}}async function p(){try{const C=await(await fetch("/api/chats")).json();s(C.chats||[])}catch(A){console.error("Failed to load chats:",A)}}async function y(A){try{const C=await fetch(`/api/chats/${A}`);if(C.ok){const P=await C.json();o({id:P.id,title:P.title}),a(P.messages||[])}else t("/"),o(null),a([])}catch(C){console.error("Failed to load chat:",C)}}async function S(){try{const C=await(await fetch("/api/chats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json();await p(),t(`/chat/${C.id}`)}catch(A){console.error("Failed to create chat:",A)}}async function k(A){try{await fetch(`/api/chats/${A}`,{method:"DELETE"}),await p(),n()?.id===A&&(t("/"),o(null),a([]))}catch(C){console.error("Failed to delete chat:",C)}}async function R(A){if(!A.trim()||l())return;if(g()===!1){a(P=>[...P,{id:"error-"+Date.now(),role:"assistant",content:"No free AI models are currently available. Please check back later or configure your API keys.",created_at:new Date().toISOString(),isError:!0}]);return}let C=n()?.id;if(!C)try{C=(await(await fetch("/api/chats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:A.slice(0,50)})})).json()).id,await p(),t(`/chat/${C}`),o({id:C,title:A.slice(0,50)})}catch(P){console.error("Failed to create chat:",P);return}try{const K=await(await fetch(`/api/chats/${C}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:A})})).json();a(O=>[...O,K])}catch(P){console.error("Failed to send message:",P);return}c(!0),u("");try{const P=i().map(j=>({role:j.role,content:j.content}));P.push({role:"user",content:A});const O=await(await fetch("/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"auto",messages:P,stream:!1})})).json();if(O.choices&&O.choices[0]){const j=O.choices[0].message?.content||O.choices[0].delta?.content||"No response";await fetch(`/api/chats/${C}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:j})}),await y(C)}else if(O.error){let j=O.error.message,Y=!1;O.error.type==="service_unavailable"||j.toLowerCase().includes("no free models")||j.toLowerCase().includes("no models available")?(j="No free AI models are currently available. The providers may be experiencing issues or all free tiers are exhausted. Please try again later.",Y=!0,m(!1)):O.error.type==="configuration_error"?j="API key not configured. Please set your OPENROUTER_API_KEY or OPENCODE_ZEN_API_KEY environment variable.":O.error.type==="upstream_error"&&(j=`The AI provider returned an error: ${O.error.message}. Please try again.`),a(b=>[...b,{id:"error-"+Date.now(),role:"assistant",content:j,created_at:new Date().toISOString(),isError:!0}])}}catch(P){console.error("Failed to get AI response:",P),a(K=>[...K,{id:"error-"+Date.now(),role:"assistant",content:`Connection error: ${P.message}. Please check your internet connection and try again.`,created_at:new Date().toISOString(),isError:!0}])}finally{c(!1),u(""),await p()}}function U(){c(!1)}return(()=>{var A=Or(),C=A.firstChild,P=C.firstChild,K=P.firstChild;return E(A,w(fr,{get chats(){return r()},get currentChatId(){return n()?.id},onNewChat:S,onSelectChat:O=>t(`/chat/${O}`),onDeleteChat:k}),C),E(K,()=>n()?.title||"FreeTier AI"),E(P,w(M,{get when(){return g()!==null},get children(){var O=_r(),j=O.firstChild,Y=j.nextSibling;return E(O,(()=>{var b=Re(()=>!!g());return()=>b()?`${v()} model${v()!==1?"s":""} available`:"No models available"})(),Y),Y.$$click=f,F(b=>{var $=`flex items-center gap-1.5 text-xs ${g()?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,N=`w-2 h-2 rounded-full ${g()?"bg-green-500":"bg-amber-500 animate-pulse"}`;return $!==b.e&&q(O,b.e=$),N!==b.t&&q(j,b.t=N),b},{e:void 0,t:void 0}),O}}),null),E(C,w(M,{get when(){return g()===!1},get children(){return Er()}}),null),E(C,w(br,{get messages(){return i()},get isStreaming(){return l()},get streamingContent(){return d()}}),null),E(C,w(Pr,{onSend:R,get isStreaming(){return l()},onStop:U,get disabled(){return g()===!1}}),null),A})()}ne(["click"]);const Lr=document.getElementById("root");Et(()=>w(sr,{get children(){return[w(Be,{path:"/",component:Ue}),w(Be,{path:"/chat/:id",component:Ue})]}}),Lr);
