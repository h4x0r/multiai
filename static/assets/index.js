(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const ut=!1,dt=(e,t)=>e===t,$e=Symbol("solid-proxy"),ft=typeof Proxy=="function",ht=Symbol("solid-track"),de={equals:dt};let He=Ge;const X=1,fe=2,Ve={owned:null,cleanups:null,context:null,owner:null};var O=null;let ye=null,gt=null,T=null,F=null,J=null,pe=0;function re(e,t){const r=T,s=O,n=e.length===0,o=t===void 0?s:t,i=n?Ve:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=n?e:()=>e(()=>H(()=>se(i)));O=i,T=null;try{return Y(a,!0)}finally{T=r,O=s}}function R(e,t){t=t?Object.assign({},de,t):de;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(r.value)),Ye(r,n));return[Xe.bind(r),s]}function K(e,t,r){const s=Te(e,t,!1,X);oe(s)}function Ee(e,t,r){He=vt;const s=Te(e,t,!1,X);s.user=!0,J?J.push(s):oe(s)}function M(e,t,r){r=r?Object.assign({},de,r):de;const s=Te(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=r.equals||void 0,oe(s),Xe.bind(s)}function mt(e){return Y(e,!1)}function H(e){if(T===null)return e();const t=T;T=null;try{return e()}finally{T=t}}function Pe(e,t,r){const s=Array.isArray(e);let n,o=r&&r.defer;return i=>{let a;if(s){a=Array(e.length);for(let l=0;l<e.length;l++)a[l]=e[l]()}else a=e();if(o)return o=!1,i;const c=H(()=>t(a,n,i));return n=a,c}}function pt(e){Ee(()=>H(e))}function Oe(e){return O===null||(O.cleanups===null?O.cleanups=[e]:O.cleanups.push(e)),e}function We(){return O}function qe(e,t){const r=O,s=T;O=e,T=null;try{return Y(t,!0)}catch(n){Ie(n)}finally{O=r,T=s}}function yt(e){const t=T,r=O;return Promise.resolve().then(()=>{T=t,O=r;let s;return Y(e,!1),T=O=null,s?s.done:void 0})}const[Fr,Ur]=R(!1);function ze(e,t){const r=Symbol("context");return{id:r,Provider:kt(r),defaultValue:e}}function Je(e){let t;return O&&O.context&&(t=O.context[e.id])!==void 0?t:e.defaultValue}function Le(e){const t=M(e),r=M(()=>Ce(t()));return r.toArray=()=>{const s=r();return Array.isArray(s)?s:s!=null?[s]:[]},r}function Xe(){if(this.sources&&this.state)if(this.state===X)oe(this);else{const e=F;F=null,Y(()=>ge(this),!1),F=e}if(T){const e=this.observers?this.observers.length:0;T.sources?(T.sources.push(this),T.sourceSlots.push(e)):(T.sources=[this],T.sourceSlots=[e]),this.observers?(this.observers.push(T),this.observerSlots.push(T.sources.length-1)):(this.observers=[T],this.observerSlots=[T.sources.length-1])}return this.value}function Ye(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&Y(()=>{for(let n=0;n<e.observers.length;n+=1){const o=e.observers[n],i=ye&&ye.running;i&&ye.disposed.has(o),(i?!o.tState:!o.state)&&(o.pure?F.push(o):J.push(o),o.observers&&Qe(o)),i||(o.state=X)}if(F.length>1e6)throw F=[],new Error},!1)),t}function oe(e){if(!e.fn)return;se(e);const t=pe;bt(e,e.value,t)}function bt(e,t,r){let s;const n=O,o=T;T=O=e;try{s=e.fn(t)}catch(i){return e.pure&&(e.state=X,e.owned&&e.owned.forEach(se),e.owned=null),e.updatedAt=r+1,Ie(i)}finally{T=o,O=n}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Ye(e,s):e.value=s,e.updatedAt=r)}function Te(e,t,r,s=X,n){const o={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:O,context:O?O.context:null,pure:r};return O===null||O!==Ve&&(O.owned?O.owned.push(o):O.owned=[o]),o}function he(e){if(e.state===0)return;if(e.state===fe)return ge(e);if(e.suspense&&H(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<pe);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===X)oe(e);else if(e.state===fe){const s=F;F=null,Y(()=>ge(e,t[0]),!1),F=s}}function Y(e,t){if(F)return e();let r=!1;t||(F=[]),J?r=!0:J=[],pe++;try{const s=e();return wt(r),s}catch(s){r||(J=null),F=null,Ie(s)}}function wt(e){if(F&&(Ge(F),F=null),e)return;const t=J;J=null,t.length&&Y(()=>He(t),!1)}function Ge(e){for(let t=0;t<e.length;t++)he(e[t])}function vt(e){let t,r=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[r++]=s:he(s)}for(t=0;t<r;t++)he(e[t])}function ge(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const n=s.state;n===X?s!==t&&(!s.updatedAt||s.updatedAt<pe)&&he(s):n===fe&&ge(s,t)}}}function Qe(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=fe,r.pure?F.push(r):J.push(r),r.observers&&Qe(r))}}function se(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){const o=n.pop(),i=r.observerSlots.pop();s<n.length&&(o.sourceSlots[i]=s,n[s]=o,r.observerSlots[s]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)se(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)se(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function xt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ie(e,t=O){throw xt(e)}function Ce(e){if(typeof e=="function"&&!e.length)return Ce(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const s=Ce(e[r]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function kt(e,t){return function(s){let n;return K(()=>n=H(()=>(O.context={...O.context,[e]:s.value},Le(()=>s.children))),void 0),n}}const $t=Symbol("fallback");function Me(e){for(let t=0;t<e.length;t++)e[t]()}function Ct(e,t,r={}){let s=[],n=[],o=[],i=0,a=t.length>1?[]:null;return Oe(()=>Me(o)),()=>{let c=e()||[],l=c.length,d,u;return c[ht],H(()=>{let v,_,f,h,$,y,A,S,I;if(l===0)i!==0&&(Me(o),o=[],s=[],n=[],i=0,a&&(a=[])),r.fallback&&(s=[$t],n[0]=re(V=>(o[0]=V,r.fallback())),i=1);else if(i===0){for(n=new Array(l),u=0;u<l;u++)s[u]=c[u],n[u]=re(p);i=l}else{for(f=new Array(l),h=new Array(l),a&&($=new Array(l)),y=0,A=Math.min(i,l);y<A&&s[y]===c[y];y++);for(A=i-1,S=l-1;A>=y&&S>=y&&s[A]===c[S];A--,S--)f[S]=n[A],h[S]=o[A],a&&($[S]=a[A]);for(v=new Map,_=new Array(S+1),u=S;u>=y;u--)I=c[u],d=v.get(I),_[u]=d===void 0?-1:d,v.set(I,u);for(d=y;d<=A;d++)I=s[d],u=v.get(I),u!==void 0&&u!==-1?(f[u]=n[d],h[u]=o[d],a&&($[u]=a[d]),u=_[u],v.set(I,u)):o[d]();for(u=y;u<l;u++)u in f?(n[u]=f[u],o[u]=h[u],a&&(a[u]=$[u],a[u](u))):n[u]=re(p);n=n.slice(0,i=l),s=c.slice(0)}return n});function p(v){if(o[u]=v,a){const[_,f]=R(u);return a[u]=f,t(c[u],_)}return t(c[u])}}}function w(e,t){return H(()=>e(t||{}))}function ie(){return!0}const St={get(e,t,r){return t===$e?r:e.get(t)},has(e,t){return t===$e?!0:e.has(t)},set:ie,deleteProperty:ie,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ie,deleteProperty:ie}},ownKeys(e){return e.keys()}};function be(e){return(e=typeof e=="function"?e():e)?e:{}}function At(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function le(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&$e in a,e[i]=typeof a=="function"?(t=!0,M(a)):a}if(ft&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const c=be(e[a])[i];if(c!==void 0)return c}},has(i){for(let a=e.length-1;a>=0;a--)if(i in be(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(be(e[a])));return[...new Set(i)]}},St);const r={},s=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let l=c.length-1;l>=0;l--){const d=c[l];if(d==="__proto__"||d==="constructor")continue;const u=Object.getOwnPropertyDescriptor(a,d);if(!s[d])s[d]=u.get?{enumerable:!0,configurable:!0,get:At.bind(r[d]=[u.get.bind(a)])}:u.value!==void 0?u:void 0;else{const p=r[d];p&&(u.get?p.push(u.get.bind(a)):u.value!==void 0&&p.push(()=>u.value))}}}const n={},o=Object.keys(s);for(let i=o.length-1;i>=0;i--){const a=o[i],c=s[a];c&&c.get?Object.defineProperty(n,a,c):n[a]=c?c.value:void 0}return n}const _t=e=>`Stale read from <${e}>.`;function ce(e){const t="fallback"in e&&{fallback:()=>e.fallback};return M(Ct(()=>e.each,e.children,t||void 0))}function j(e){const t=e.keyed,r=M(()=>e.when,void 0,void 0),s=t?r:M(r,void 0,{equals:(n,o)=>!n==!o});return M(()=>{const n=s();if(n){const o=e.children;return typeof o=="function"&&o.length>0?H(()=>o(t?n:()=>{if(!H(s))throw _t("Show");return r()})):o}return e.fallback},void 0,void 0)}const Re=e=>M(()=>e());function Et(e,t,r){let s=r.length,n=t.length,o=s,i=0,a=0,c=t[n-1].nextSibling,l=null;for(;i<n||a<o;){if(t[i]===r[a]){i++,a++;continue}for(;t[n-1]===r[o-1];)n--,o--;if(n===i){const d=o<s?a?r[a-1].nextSibling:r[o-a]:c;for(;a<o;)e.insertBefore(r[a++],d)}else if(o===a)for(;i<n;)(!l||!l.has(t[i]))&&t[i].remove(),i++;else if(t[i]===r[o-1]&&r[a]===t[n-1]){const d=t[--n].nextSibling;e.insertBefore(r[a++],t[i++].nextSibling),e.insertBefore(r[--o],d),t[n]=r[o]}else{if(!l){l=new Map;let u=a;for(;u<o;)l.set(r[u],u++)}const d=l.get(t[i]);if(d!=null)if(a<d&&d<o){let u=i,p=1,v;for(;++u<n&&u<o&&!((v=l.get(t[u]))==null||v!==d+p);)p++;if(p>d-a){const _=t[i];for(;a<d;)e.insertBefore(r[a++],_)}else e.replaceChild(r[a++],t[i++])}else i++;else t[i++].remove()}}}const Ne="_$DX_DELEGATE";function Pt(e,t,r,s={}){let n;return re(o=>{n=o,t===document?e():P(t,e(),t.firstChild?null:void 0,r)},s.owner),()=>{n(),t.textContent=""}}function L(e,t,r,s){let n;const o=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},i=()=>(n||(n=o())).cloneNode(!0);return i.cloneNode=i,i}function ae(e,t=window.document){const r=t[Ne]||(t[Ne]=new Set);for(let s=0,n=e.length;s<n;s++){const o=e[s];r.has(o)||(r.add(o),t.addEventListener(o,Ot))}}function we(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function q(e,t){t==null?e.removeAttribute("class"):e.className=t}function Ze(e,t,r,s){Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r}function Se(e,t,r){return H(()=>e(t,r))}function P(e,t,r,s){if(r!==void 0&&!s&&(s=[]),typeof t!="function")return me(e,t,s,r);K(n=>me(e,t(),n,r),s)}function Ot(e){let t=e.target;const r=`$$${e.type}`,s=e.target,n=e.currentTarget,o=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),i=()=>{const c=t[r];if(c&&!t.disabled){const l=t[`${r}Data`];if(l!==void 0?c.call(t,l,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const c=e.composedPath();o(c[0]);for(let l=0;l<c.length-2&&(t=c[l],!!i());l++){if(t._$host){t=t._$host,a();break}if(t.parentNode===n)break}}else a();o(s)}function me(e,t,r,s,n){for(;typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,i=s!==void 0;if(e=i&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===r))return r;if(i){let a=r[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),r=te(e,r,s,a)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean")r=te(e,r,s);else{if(o==="function")return K(()=>{let a=t();for(;typeof a=="function";)a=a();r=me(e,a,r,s)}),()=>r;if(Array.isArray(t)){const a=[],c=r&&Array.isArray(r);if(Ae(a,t,r,n))return K(()=>r=me(e,a,r,s,!0)),()=>r;if(a.length===0){if(r=te(e,r,s),i)return r}else c?r.length===0?Fe(e,a,s):Et(e,r,a):(r&&te(e),Fe(e,a));r=a}else if(t.nodeType){if(Array.isArray(r)){if(i)return r=te(e,r,s,t);te(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function Ae(e,t,r,s){let n=!1;for(let o=0,i=t.length;o<i;o++){let a=t[o],c=r&&r[e.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))n=Ae(e,a,c)||n;else if(l==="function")if(s){for(;typeof a=="function";)a=a();n=Ae(e,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||n}else e.push(a),n=!0;else{const d=String(a);c&&c.nodeType===3&&c.data===d?e.push(c):e.push(document.createTextNode(d))}}return n}function Fe(e,t,r=null){for(let s=0,n=t.length;s<n;s++)e.insertBefore(t[s],r)}function te(e,t,r,s){if(r===void 0)return e.textContent="";const n=s||document.createTextNode("");if(t.length){let o=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(n!==a){const c=a.parentNode===e;!o&&!i?c?e.replaceChild(n,a):e.insertBefore(n,r):c&&a.remove()}else o=!0}}else e.insertBefore(n,r);return[n]}const Lt=!1;function et(){let e=new Set;function t(n){return e.add(n),()=>e.delete(n)}let r=!1;function s(n,o){if(r)return!(r=!1);const i={to:n,options:o,defaultPrevented:!1,preventDefault:()=>i.defaultPrevented=!0};for(const a of e)a.listener({...i,from:a.location,retry:c=>{c&&(r=!0),a.navigate(n,{...o,resolve:!1})}});return!i.defaultPrevented}return{subscribe:t,confirm:s}}let _e;function je(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),_e=window.history.state._depth}je();function Tt(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function It(e,t){let r=!1;return()=>{const s=_e;je();const n=s==null?null:_e-s;if(r){r=!1;return}n&&t(n)?(r=!0,window.history.go(-n)):e()}}const Rt=/^(?:[a-z0-9]+:)?\/\//i,jt=/^\/+|(\/)\/+$/g,tt="http://sr";function ne(e,t=!1){const r=e.replace(jt,"$1");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function ue(e,t,r){if(Rt.test(t))return;const s=ne(e),n=r&&ne(r);let o="";return!n||t.startsWith("/")?o=s:n.toLowerCase().indexOf(s.toLowerCase())!==0?o=s+n:o=n,(o||"/")+ne(t,!o)}function Dt(e,t){if(e==null)throw new Error(t);return e}function Mt(e,t){return ne(e).replace(/\/*(\*.*)?$/g,"")+ne(t)}function rt(e){const t={};return e.searchParams.forEach((r,s)=>{s in t?Array.isArray(t[s])?t[s].push(r):t[s]=[t[s],r]:t[s]=r}),t}function Nt(e,t,r){const[s,n]=e.split("/*",2),o=s.split("/").filter(Boolean),i=o.length;return a=>{const c=a.split("/").filter(Boolean),l=c.length-i;if(l<0||l>0&&n===void 0&&!t)return null;const d={path:i?"":"/",params:{}},u=p=>r===void 0?void 0:r[p];for(let p=0;p<i;p++){const v=o[p],_=v[0]===":",f=_?c[p]:c[p].toLowerCase(),h=_?v.slice(1):v.toLowerCase();if(_&&ve(f,u(h)))d.params[h]=f;else if(_||!ve(f,h))return null;d.path+=`/${f}`}if(n){const p=l?c.slice(-l).join("/"):"";if(ve(p,u(n)))d.params[n]=p;else return null}return d}}function ve(e,t){const r=s=>s===e;return t===void 0?!0:typeof t=="string"?r(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(r):t instanceof RegExp?t.test(e):!1}function Ft(e){const[t,r]=e.pattern.split("/*",2),s=t.split("/").filter(Boolean);return s.reduce((n,o)=>n+(o.startsWith(":")?2:3),s.length-(r===void 0?0:1))}function nt(e){const t=new Map,r=We();return new Proxy({},{get(s,n){return t.has(n)||qe(r,()=>t.set(n,M(()=>e()[n]))),t.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(s,n){return n in e()}})}function st(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let r=e.slice(0,t.index),s=e.slice(t.index+t[0].length);const n=[r,r+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(s);)n.push(r+=t[1]),s=s.slice(t[0].length);return st(s).reduce((o,i)=>[...o,...n.map(a=>a+i)],[])}const Ut=100,ot=ze(),at=ze(),it=()=>Dt(Je(ot),"<A> and 'use' router primitives can be only used inside a Route."),Bt=()=>it().navigatorFactory(),Kt=()=>it().params;function Ht(e,t=""){const{component:r,preload:s,load:n,children:o,info:i}=e,a=!o||Array.isArray(o)&&!o.length,c={key:e,component:r,preload:s||n,info:i};return lt(e.path).reduce((l,d)=>{for(const u of st(d)){const p=Mt(t,u);let v=a?p:p.split("/*",1)[0];v=v.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),l.push({...c,originalPath:d,pattern:v,matcher:Nt(v,!a,e.matchFilters)})}return l},[])}function Vt(e,t=0){return{routes:e,score:Ft(e[e.length-1])*1e4-t,matcher(r){const s=[];for(let n=e.length-1;n>=0;n--){const o=e[n],i=o.matcher(r);if(!i)return null;s.unshift({...i,route:o})}return s}}}function lt(e){return Array.isArray(e)?e:[e]}function ct(e,t="",r=[],s=[]){const n=lt(e);for(let o=0,i=n.length;o<i;o++){const a=n[o];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const c=Ht(a,t);for(const l of c){r.push(l);const d=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!d)ct(a.children,l.pattern,r,s);else{const u=Vt([...r],s.length);s.push(u)}r.pop()}}}return r.length?s:s.sort((o,i)=>i.score-o.score)}function xe(e,t){for(let r=0,s=e.length;r<s;r++){const n=e[r].matcher(t);if(n)return n}return[]}function Wt(e,t,r){const s=new URL(tt),n=M(d=>{const u=e();try{return new URL(u,s)}catch{return console.error(`Invalid path ${u}`),d}},s,{equals:(d,u)=>d.href===u.href}),o=M(()=>n().pathname),i=M(()=>n().search,!0),a=M(()=>n().hash),c=()=>"",l=Pe(i,()=>rt(n()));return{get pathname(){return o()},get search(){return i()},get hash(){return a()},get state(){return t()},get key(){return c()},query:r?r(l):nt(l)}}let Q;function qt(){return Q}function zt(e,t,r,s={}){const{signal:[n,o],utils:i={}}=e,a=i.parsePath||(g=>g),c=i.renderPath||(g=>g),l=i.beforeLeave||et(),d=ue("",s.base||"");if(d===void 0)throw new Error(`${d} is not a valid base path`);d&&!n().value&&o({value:d,replace:!0,scroll:!1});const[u,p]=R(!1);let v;const _=(g,m)=>{m.value===f()&&m.state===$()||(v===void 0&&p(!0),Q=g,v=m,yt(()=>{v===m&&(h(v.value),y(v.state),I[1](x=>x.filter(U=>U.pending)))}).finally(()=>{v===m&&mt(()=>{Q=void 0,g==="navigate"&&b(v),p(!1),v=void 0})}))},[f,h]=R(n().value),[$,y]=R(n().state),A=Wt(f,$,i.queryWrapper),S=[],I=R([]),V=M(()=>typeof s.transformUrl=="function"?xe(t(),s.transformUrl(A.pathname)):xe(t(),A.pathname)),G=()=>{const g=V(),m={};for(let x=0;x<g.length;x++)Object.assign(m,g[x].params);return m},Z=i.paramsWrapper?i.paramsWrapper(G,t):nt(G),E={pattern:d,path:()=>d,outlet:()=>null,resolvePath(g){return ue(d,g)}};return K(Pe(n,g=>_("native",g),{defer:!0})),{base:E,location:A,params:Z,isRouting:u,renderPath:c,parsePath:a,navigatorFactory:k,matches:V,beforeLeave:l,preloadRoute:C,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:I};function D(g,m,x){H(()=>{if(typeof m=="number"){m&&(i.go?i.go(m):console.warn("Router integration does not support relative routing"));return}const U=!m||m[0]==="?",{replace:B,resolve:N,scroll:z,state:W}={replace:!1,resolve:!U,scroll:!0,...x},ee=N?g.resolvePath(m):ue(U&&A.pathname||"",m);if(ee===void 0)throw new Error(`Path '${m}' is not a routable path`);if(S.length>=Ut)throw new Error("Too many redirects");const De=f();(ee!==De||W!==$())&&(Lt||l.confirm(ee,x)&&(S.push({value:De,replace:B,scroll:z,state:$()}),_("navigate",{value:ee,state:W})))})}function k(g){return g=g||Je(at)||E,(m,x)=>D(g,m,x)}function b(g){const m=S[0];m&&(o({...g,replace:m.replace,scroll:m.scroll}),S.length=0)}function C(g,m){const x=xe(t(),g.pathname),U=Q;Q="preload";for(let B in x){const{route:N,params:z}=x[B];N.component&&N.component.preload&&N.component.preload();const{preload:W}=N;m&&W&&qe(r(),()=>W({params:z,location:{pathname:g.pathname,search:g.search,hash:g.hash,query:rt(g),state:null,key:""},intent:"preload"}))}Q=U}}function Jt(e,t,r,s){const{base:n,location:o,params:i}=e,{pattern:a,component:c,preload:l}=s().route,d=M(()=>s().path);c&&c.preload&&c.preload();const u=l?l({params:i,location:o,intent:Q||"initial"}):void 0;return{parent:t,pattern:a,path:d,outlet:()=>c?w(c,{params:i,location:o,data:u,get children(){return r()}}):r(),resolvePath(v){return ue(n.path(),v,d())}}}const Xt=e=>t=>{const{base:r}=t,s=Le(()=>t.children),n=M(()=>ct(s(),t.base||""));let o;const i=zt(e,n,()=>o,{base:r,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(i),w(ot.Provider,{value:i,get children(){return w(Yt,{routerState:i,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[Re(()=>(o=We())&&null),w(Gt,{routerState:i,get branches(){return n()}})]}})}})};function Yt(e){const t=e.routerState.location,r=e.routerState.params,s=M(()=>e.preload&&H(()=>{e.preload({params:r,location:t,intent:qt()||"initial"})}));return w(j,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:n=>w(n,{params:r,location:t,get data(){return s()},get children(){return e.children}})})}function Gt(e){const t=[];let r;const s=M(Pe(e.routerState.matches,(n,o,i)=>{let a=o&&n.length===o.length;const c=[];for(let l=0,d=n.length;l<d;l++){const u=o&&o[l],p=n[l];i&&u&&p.route.key===u.route.key?c[l]=i[l]:(a=!1,t[l]&&t[l](),re(v=>{t[l]=v,c[l]=Jt(e.routerState,c[l-1]||e.routerState.base,Ue(()=>s()[l+1]),()=>{const _=e.routerState.matches();return _[l]??_[0]})}))}return t.splice(n.length).forEach(l=>l()),i&&a?i:(r=c[0],c)}));return Ue(()=>s()&&r)()}const Ue=e=>()=>w(j,{get when(){return e()},keyed:!0,children:t=>w(at.Provider,{value:t,get children(){return t.outlet()}})}),Be=e=>{const t=Le(()=>e.children);return le(e,{get children(){return t()}})};function Qt([e,t],r,s){return[e,s?n=>t(s(n)):t]}function Zt(e){let t=!1;const r=n=>typeof n=="string"?{value:n}:n,s=Qt(R(r(e.get()),{equals:(n,o)=>n.value===o.value&&n.state===o.state}),void 0,n=>(!t&&e.set(n),n));return e.init&&Oe(e.init((n=e.get())=>{t=!0,s[1](r(n)),t=!1})),Xt({signal:s,create:e.create,utils:e.utils})}function er(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function tr(e,t){const r=e&&document.getElementById(e);r?r.scrollIntoView():t&&window.scrollTo(0,0)}const rr=new Map;function nr(e=!0,t=!1,r="/_server",s){return n=>{const o=n.base.path(),i=n.navigatorFactory(n.base);let a,c;function l(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function d(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const h=f.composedPath().find(V=>V instanceof Node&&V.nodeName.toUpperCase()==="A");if(!h||t&&!h.hasAttribute("link"))return;const $=l(h),y=$?h.href.baseVal:h.href;if(($?h.target.baseVal:h.target)||!y&&!h.hasAttribute("state"))return;const S=(h.getAttribute("rel")||"").split(/\s+/);if(h.hasAttribute("download")||S&&S.includes("external"))return;const I=$?new URL(y,document.baseURI):new URL(y);if(!(I.origin!==window.location.origin||o&&I.pathname&&!I.pathname.toLowerCase().startsWith(o.toLowerCase())))return[h,I]}function u(f){const h=d(f);if(!h)return;const[$,y]=h,A=n.parsePath(y.pathname+y.search+y.hash),S=$.getAttribute("state");f.preventDefault(),i(A,{resolve:!1,replace:$.hasAttribute("replace"),scroll:!$.hasAttribute("noscroll"),state:S?JSON.parse(S):void 0})}function p(f){const h=d(f);if(!h)return;const[$,y]=h;s&&(y.pathname=s(y.pathname)),n.preloadRoute(y,$.getAttribute("preload")!=="false")}function v(f){clearTimeout(a);const h=d(f);if(!h)return c=null;const[$,y]=h;c!==$&&(s&&(y.pathname=s(y.pathname)),a=setTimeout(()=>{n.preloadRoute(y,$.getAttribute("preload")!=="false"),c=$},20))}function _(f){if(f.defaultPrevented)return;let h=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.getAttribute("formaction"):f.target.getAttribute("action");if(!h)return;if(!h.startsWith("https://action/")){const y=new URL(h,tt);if(h=n.parsePath(y.pathname+y.search),!h.startsWith(r))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const $=rr.get(h);if($){f.preventDefault();const y=new FormData(f.target,f.submitter);$.call({r:n,f:f.target},f.target.enctype==="multipart/form-data"?y:new URLSearchParams(y))}}ae(["click","submit"]),document.addEventListener("click",u),e&&(document.addEventListener("mousemove",v,{passive:!0}),document.addEventListener("focusin",p,{passive:!0}),document.addEventListener("touchstart",p,{passive:!0})),document.addEventListener("submit",_),Oe(()=>{document.removeEventListener("click",u),e&&(document.removeEventListener("mousemove",v),document.removeEventListener("focusin",p),document.removeEventListener("touchstart",p)),document.removeEventListener("submit",_)})}}function sr(e){const t=()=>{const s=window.location.pathname.replace(/^\/+/,"/")+window.location.search,n=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:s+window.location.hash,state:n}},r=et();return Zt({get:t,set({value:s,replace:n,scroll:o,state:i}){n?window.history.replaceState(Tt(i),"",s):window.history.pushState(i,"",s),tr(decodeURIComponent(window.location.hash.slice(1)),o),je()},init:s=>er(window,"popstate",It(s,n=>{if(n)return!r.confirm(n);{const o=t();return!r.confirm(o.value,{state:o.state})}})),create:nr(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:s=>window.history.go(s),beforeLeave:r}})(e)}var or=L('<div class=mb-2><h3 class="px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Today'),ar=L('<div class=mb-2><h3 class="px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Yesterday'),ir=L('<div class=mb-2><h3 class="px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Older'),lr=L('<p class="px-3 py-8 text-center text-sm text-gray-500 dark:text-gray-400">No chats yet.<br>Start a new conversation!'),cr=L('<aside class="w-60 border-r border-gray-200 dark:border-gray-700 bg-gray-100/50 dark:bg-gray-800/50 flex flex-col"><div class=p-3><button class="w-full flex items-center gap-2 px-3 py-2 rounded-lg bg-accent hover:bg-accent-hover text-white text-sm font-medium transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>New Chat</button></div><div class="flex-1 overflow-y-auto px-2"></div><div class="p-3 border-t border-gray-200 dark:border-gray-700"><div class="text-xs text-gray-500 dark:text-gray-400 text-center">FreeTier v0.1.0'),ur=L('<button class="absolute right-2 p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-500"title="Delete chat"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),dr=L('<div><button class="flex-1 text-left px-3 py-2 text-sm truncate">');function fr(e){const[t,r]=R(null);function s(o){const i=new Date,a=new Date(i);a.setDate(a.getDate()-1);const c={today:[],yesterday:[],older:[]};return o.forEach(l=>{const u=new Date(l.updated_at).toDateString();u===i.toDateString()?c.today.push(l):u===a.toDateString()?c.yesterday.push(l):c.older.push(l)}),c}const n=()=>s(e.chats);return(()=>{var o=cr(),i=o.firstChild,a=i.firstChild,c=i.nextSibling;return Ze(a,"click",e.onNewChat),P(c,w(j,{get when(){return n().today.length>0},get children(){var l=or();return l.firstChild,P(l,w(ce,{get each(){return n().today},children:d=>w(ke,le({chat:d},e,{hoveredId:t,setHoveredId:r}))}),null),l}}),null),P(c,w(j,{get when(){return n().yesterday.length>0},get children(){var l=ar();return l.firstChild,P(l,w(ce,{get each(){return n().yesterday},children:d=>w(ke,le({chat:d},e,{hoveredId:t,setHoveredId:r}))}),null),l}}),null),P(c,w(j,{get when(){return n().older.length>0},get children(){var l=ir();return l.firstChild,P(l,w(ce,{get each(){return n().older},children:d=>w(ke,le({chat:d},e,{hoveredId:t,setHoveredId:r}))}),null),l}}),null),P(c,w(j,{get when(){return e.chats.length===0},get children(){return lr()}}),null),o})()}function ke(e){const t=()=>e.currentChatId===e.chat.id,r=()=>e.hoveredId()===e.chat.id;return(()=>{var s=dr(),n=s.firstChild;return s.addEventListener("mouseleave",()=>e.setHoveredId(null)),s.addEventListener("mouseenter",()=>e.setHoveredId(e.chat.id)),n.$$click=()=>e.onSelectChat(e.chat.id),P(n,()=>e.chat.title||"New Chat"),P(s,w(j,{get when(){return r()},get children(){var o=ur();return o.$$click=i=>{i.stopPropagation(),e.onDeleteChat(e.chat.id)},o}}),null),K(()=>q(s,`group relative flex items-center rounded-lg cursor-pointer transition-colors ${t()?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-200/50 dark:hover:bg-gray-700/50"}`)),s})()}ae(["click"]);var hr=L('<div class="flex-1 overflow-y-auto px-4 py-6"><div class="max-w-3xl mx-auto space-y-4"><div>'),gr=L('<div class="flex flex-col items-center justify-center py-12 text-center"><div class="w-16 h-16 mb-4 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"><svg class="w-8 h-8 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg></div><h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2">Welcome to FreeTier AI</h2><p class="text-gray-500 dark:text-gray-400 max-w-md">Chat with free AI models. Ask questions, get help with code, or just have a conversation.'),mr=L('<div><button class="p-1.5 rounded-lg bg-white dark:bg-gray-700 shadow-sm hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400"title=Copy><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),pr=L('<div><div class="relative max-w-[80%]"><div><div class="text-sm whitespace-pre-wrap break-words">'),yr=L('<div class="flex justify-start message-enter"><div class=max-w-[80%]><div class="px-4 py-3 rounded-2xl rounded-bl-md bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100"><div class="text-sm whitespace-pre-wrap break-words"><span class=cursor-blink>|');function br(e){let t;return Ee(()=>{e.messages.length,e.streamingContent,t&&t.scrollIntoView({behavior:"smooth"})}),(()=>{var r=hr(),s=r.firstChild,n=s.firstChild;P(s,w(j,{get when(){return Re(()=>e.messages.length===0)()&&!e.isStreaming},get children(){return w(wr,{})}}),n),P(s,w(ce,{get each(){return e.messages},children:i=>w(vr,{message:i})}),n),P(s,w(j,{get when(){return e.isStreaming},get children(){return w(xr,{get content(){return e.streamingContent}})}}),n);var o=t;return typeof o=="function"?Se(o,n):t=n,r})()}function wr(){return gr()}function vr(e){const[t,r]=R(!1),s=()=>e.message.role==="user";async function n(){try{await navigator.clipboard.writeText(e.message.content)}catch(o){console.error("Failed to copy:",o)}}return(()=>{var o=pr(),i=o.firstChild,a=i.firstChild,c=a.firstChild;return o.addEventListener("mouseleave",()=>r(!1)),o.addEventListener("mouseenter",()=>r(!0)),P(c,()=>e.message.content),P(i,w(j,{get when(){return t()},get children(){var l=mr(),d=l.firstChild;return d.$$click=n,K(()=>q(l,`absolute top-0 ${s()?"left-0 -translate-x-full pr-2":"right-0 translate-x-full pl-2"} flex items-center gap-1`)),l}}),null),K(l=>{var d=`group flex ${s()?"justify-end":"justify-start"} message-enter`,u=`px-4 py-3 rounded-2xl ${s()?"bg-accent text-white rounded-br-md":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-bl-md"}`;return d!==l.e&&q(o,l.e=d),u!==l.t&&q(a,l.t=u),l},{e:void 0,t:void 0}),o})()}function xr(e){return(()=>{var t=yr(),r=t.firstChild,s=r.firstChild,n=s.firstChild,o=n.firstChild;return P(n,()=>e.content||"",o),t})()}ae(["click"]);var kr=L('<div class="mb-2 px-3 py-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"><p class="text-sm text-red-600 dark:text-red-400">'),$r=L('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13">'),Cr=L('<button type=submit><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 10l7-7m0 0l7 7m-7-7v18">'),Sr=L('<span class="text-xs text-gray-400">Press <kbd class="px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-700 font-mono">⌘</kbd> + <kbd class="px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-700 font-mono">↩</kbd> to send'),Ar=L('<div><div class="max-w-3xl mx-auto"><form class=relative><input type=file accept=.pdf,.docx,.txt,.md class=hidden><div><button type=button></button><textarea rows=1 class="flex-1 py-3 pr-3 bg-transparent resize-none outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400 text-sm max-h-48 disabled:cursor-not-allowed"></textarea></div><div class="mt-2 text-center">'),_r=L('<svg class="w-5 h-5 animate-spin"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),Er=L('<button type=button class="m-2 p-2 rounded-lg bg-red-500 hover:bg-red-600 text-white transition-colors"title=Stop><svg class="w-5 h-5"fill=currentColor viewBox="0 0 24 24"><rect x=6 y=6 width=12 height=12 rx=1>'),Pr=L('<span class="text-xs text-amber-600 dark:text-amber-400">Messaging disabled - no AI models available'),Or=L('<span class="text-xs text-accent">Processing document...');function Lr(e){const[t,r]=R(""),[s,n]=R(!1),[o,i]=R(null);let a,c;const l=()=>e.isStreaming||e.disabled||s();function d(f){f?.preventDefault();const h=t().trim();h&&!l()&&(e.onSend(h),r(""),a&&(a.style.height="auto"))}function u(f){(f.metaKey||f.ctrlKey)&&f.key==="Enter"&&(f.preventDefault(),d())}function p(f){r(f.target.value),f.target.style.height="auto",f.target.style.height=Math.min(f.target.scrollHeight,200)+"px"}function v(){c&&!l()&&c.click()}async function _(f){const h=f.target.files?.[0];if(!h)return;const $=[".pdf",".docx",".txt",".md"],y="."+h.name.split(".").pop().toLowerCase();if(!$.includes(y)){i(`Unsupported file type. Allowed: ${$.join(", ")}`),setTimeout(()=>i(null),5e3),f.target.value="";return}const A=10*1024*1024;if(h.size>A){i("File too large. Maximum size is 10MB."),setTimeout(()=>i(null),5e3),f.target.value="";return}if(e.onUpload){n(!0),i(null);try{await e.onUpload(h)}catch(S){i(S.message||"Upload failed"),setTimeout(()=>i(null),5e3)}finally{n(!1),f.target.value=""}}}return(()=>{var f=Ar(),h=f.firstChild,$=h.firstChild,y=$.firstChild,A=y.nextSibling,S=A.firstChild,I=S.nextSibling,V=A.nextSibling;P(h,w(j,{get when(){return o()},get children(){var E=kr(),D=E.firstChild;return P(D,o),E}}),$),$.addEventListener("submit",d),y.addEventListener("change",_);var G=c;typeof G=="function"?Se(G,y):c=y,S.$$click=v,P(S,w(j,{get when(){return!s()},get fallback(){return _r()},get children(){return $r()}})),I.$$keydown=u,I.$$input=p;var Z=a;return typeof Z=="function"?Se(Z,I):a=I,P(A,w(j,{get when(){return!e.isStreaming},get fallback(){return(()=>{var E=Er();return Ze(E,"click",e.onStop),E})()},get children(){var E=Cr();return K(D=>{var k=!t().trim()||l(),b=`m-2 p-2 rounded-lg transition-colors ${t().trim()&&!l()?"bg-accent hover:bg-accent-hover text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,C=e.disabled?"No models available":"Send (⌘↩)";return k!==D.e&&(E.disabled=D.e=k),b!==D.t&&q(E,D.t=b),C!==D.a&&we(E,"title",D.a=C),D},{e:void 0,t:void 0,a:void 0}),E}}),null),P(V,w(j,{get when(){return!e.disabled},get fallback(){return Pr()},get children(){return w(j,{get when(){return!s()},get fallback(){return Or()},get children(){return Sr()}})}})),K(E=>{var D=`border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 ${e.disabled?"opacity-60":""}`,k=`flex items-end gap-2 bg-gray-50 dark:bg-gray-900 rounded-xl border ${e.disabled?"border-gray-300 dark:border-gray-600":"border-gray-200 dark:border-gray-700 focus-within:border-accent focus-within:ring-1 focus-within:ring-accent"}`,b=`p-3 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s()?"text-accent animate-pulse":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,C=s()?"Uploading...":"Attach file (PDF, DOCX, TXT)",g=l(),m=e.disabled?"No models available...":s()?"Uploading document...":"Message... (⌘↩ to send)",x=l();return D!==E.e&&q(f,E.e=D),k!==E.t&&q(A,E.t=k),b!==E.a&&q(S,E.a=b),C!==E.o&&we(S,"title",E.o=C),g!==E.i&&(S.disabled=E.i=g),m!==E.n&&we(I,"placeholder",E.n=m),x!==E.s&&(I.disabled=E.s=x),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),K(()=>I.value=t()),f})()}ae(["click","input","keydown"]);var Tr=L('<div><span></span><button class="ml-1 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700"title=Refresh><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),Ir=L('<div class="absolute right-0 mt-1 w-40 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg py-1 z-50"><button class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">Markdown (.md)</button><button class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">PDF (.pdf)</button><button class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">Word (.docx)'),Rr=L('<div class=relative><button class="p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400"title="Export chat"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4">'),jr=L(`<div class="bg-amber-50 dark:bg-amber-900/20 border-b border-amber-200 dark:border-amber-800 px-4 py-2"><p class="text-xs text-amber-800 dark:text-amber-200 text-center font-medium">"If you're not paying for it, you're the product."</p><p class="text-xs text-amber-700 dark:text-amber-300 text-center mt-1">Free models train on your data. Assume all conversations are leaked to the public.`),Dr=L('<div class="bg-amber-50 dark:bg-amber-900/20 border-b border-amber-200 dark:border-amber-800 px-4 py-3"><div class="flex items-start gap-3 max-w-3xl mx-auto"><svg class="w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h3 class="text-sm font-medium text-amber-800 dark:text-amber-200">No Free AI Models Available</h3><p class="text-sm text-amber-700 dark:text-amber-300 mt-1">All free tier quotas may be exhausted, or the providers are experiencing issues. You can still view your chat history. Check back later.'),Mr=L('<div class="h-screen flex bg-gray-50 dark:bg-gray-900"><div class="flex-1 flex flex-col"><header class="h-12 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm"><h1 class="text-sm font-medium text-gray-600 dark:text-gray-300"></h1><div class="flex items-center gap-3">');function Ke(){const e=Kt(),t=Bt(),[r,s]=R([]),[n,o]=R(null),[i,a]=R([]),[c,l]=R(!1),[d,u]=R(""),[p,v]=R(null),[_,f]=R(0),[h,$]=R(!1);pt(async()=>{await Promise.all([A(),y()]),e.id&&await S(e.id)}),Ee(async()=>{e.id&&e.id!==n()?.id&&await S(e.id)});async function y(){try{const C=(await(await fetch("/v1/models")).json()).data?.length||0;f(C),v(C>0)}catch(k){console.error("Failed to check models:",k),v(!1)}}async function A(){try{const b=await(await fetch("/api/chats")).json();s(b.chats||[])}catch(k){console.error("Failed to load chats:",k)}}async function S(k){try{const b=await fetch(`/api/chats/${k}`);if(b.ok){const C=await b.json();o({id:C.id,title:C.title}),a(C.messages||[])}else t("/"),o(null),a([])}catch(b){console.error("Failed to load chat:",b)}}async function I(){try{const b=await(await fetch("/api/chats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json();await A(),t(`/chat/${b.id}`)}catch(k){console.error("Failed to create chat:",k)}}async function V(k){try{await fetch(`/api/chats/${k}`,{method:"DELETE"}),await A(),n()?.id===k&&(t("/"),o(null),a([]))}catch(b){console.error("Failed to delete chat:",b)}}async function G(k){if(!k.trim()||c())return;if(p()===!1){a(C=>[...C,{id:"error-"+Date.now(),role:"assistant",content:"No free AI models are currently available. Please check back later or configure your API keys.",created_at:new Date().toISOString(),isError:!0}]);return}let b=n()?.id;if(!b)try{b=(await(await fetch("/api/chats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:k.slice(0,50)})})).json()).id,await A(),t(`/chat/${b}`),o({id:b,title:k.slice(0,50)})}catch(C){console.error("Failed to create chat:",C);return}try{const g=await(await fetch(`/api/chats/${b}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:k})})).json();a(m=>[...m,g])}catch(C){console.error("Failed to send message:",C);return}l(!0),u("");try{const C=i().map(x=>({role:x.role,content:x.content}));C.push({role:"user",content:k});const m=await(await fetch("/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"auto",messages:C,stream:!1})})).json();if(m.choices&&m.choices[0]){const x=m.choices[0].message?.content||m.choices[0].delta?.content||"No response";await fetch(`/api/chats/${b}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:x})}),await S(b)}else if(m.error){let x=m.error.message,U=!1;m.error.type==="service_unavailable"||x.toLowerCase().includes("no free models")||x.toLowerCase().includes("no models available")?(x="No free AI models are currently available. The providers may be experiencing issues or all free tiers are exhausted. Please try again later.",U=!0,v(!1)):m.error.type==="configuration_error"?x="API key not configured. Please set your OPENROUTER_API_KEY or OPENCODE_ZEN_API_KEY environment variable.":m.error.type==="upstream_error"&&(x=`The AI provider returned an error: ${m.error.message}. Please try again.`),a(B=>[...B,{id:"error-"+Date.now(),role:"assistant",content:x,created_at:new Date().toISOString(),isError:!0}])}}catch(C){console.error("Failed to get AI response:",C),a(g=>[...g,{id:"error-"+Date.now(),role:"assistant",content:`Connection error: ${C.message}. Please check your internet connection and try again.`,created_at:new Date().toISOString(),isError:!0}])}finally{l(!1),u(""),await A()}}function Z(){l(!1)}async function E(k){let b=n()?.id;if(!b)try{b=(await(await fetch("/api/chats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:`Document: ${k.name}`})})).json()).id,await A(),t(`/chat/${b}`),o({id:b,title:`Document: ${k.name}`})}catch{throw new Error("Failed to create chat for upload")}const C=new FormData;C.append("file",k);const g=await fetch(`/api/chats/${b}/upload`,{method:"POST",body:C});if(!g.ok){const m=await g.json();throw new Error(m.error||"Upload failed")}await S(b),await A()}function D(k){const b=n()?.id;if(!b)return;const C=`/api/chats/${b}/export?format=${k}`,g=document.createElement("a");g.href=C,g.download=`${n()?.title||"chat"}.${k}`,document.body.appendChild(g),g.click(),document.body.removeChild(g),$(!1)}return(()=>{var k=Mr(),b=k.firstChild,C=b.firstChild,g=C.firstChild,m=g.nextSibling;return P(k,w(fr,{get chats(){return r()},get currentChatId(){return n()?.id},onNewChat:I,onSelectChat:x=>t(`/chat/${x}`),onDeleteChat:V}),b),P(g,()=>n()?.title||"MultiAI"),P(m,w(j,{get when(){return p()!==null},get children(){var x=Tr(),U=x.firstChild,B=U.nextSibling;return P(x,(()=>{var N=Re(()=>!!p());return()=>N()?`${_()} model${_()!==1?"s":""} available`:"No models available"})(),B),B.$$click=y,K(N=>{var z=`flex items-center gap-1.5 text-xs ${p()?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,W=`w-2 h-2 rounded-full ${p()?"bg-green-500":"bg-amber-500 animate-pulse"}`;return z!==N.e&&q(x,N.e=z),W!==N.t&&q(U,N.t=W),N},{e:void 0,t:void 0}),x}}),null),P(m,w(j,{get when(){return n()},get children(){var x=Rr(),U=x.firstChild;return U.$$click=()=>$(!h()),P(x,w(j,{get when(){return h()},get children(){var B=Ir(),N=B.firstChild,z=N.nextSibling,W=z.nextSibling;return B.$$click=ee=>ee.stopPropagation(),N.$$click=()=>D("md"),z.$$click=()=>D("pdf"),W.$$click=()=>D("docx"),B}}),null),x}}),null),P(b,w(j,{get when(){return p()===!0},get children(){return jr()}}),null),P(b,w(j,{get when(){return p()===!1},get children(){return Dr()}}),null),P(b,w(br,{get messages(){return i()},get isStreaming(){return c()},get streamingContent(){return d()}}),null),P(b,w(Lr,{onSend:G,onUpload:E,get isStreaming(){return c()},onStop:Z,get disabled(){return p()===!1}}),null),k})()}ae(["click"]);const Nr=document.getElementById("root");Pt(()=>w(sr,{get children(){return[w(Be,{path:"/",component:Ke}),w(Be,{path:"/chat/:id",component:Ke})]}}),Nr);
